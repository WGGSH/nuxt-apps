import{V as E}from"./CJ4IEWei.js";import{d as v,t as a,L as O,A as m,v as f,S as L,P as V,_ as A,N as B,O as $,z as p,R as N,c as h,i as z,M as n,B as C,U as k,x as b,y as g}from"./DXKcQ7uH.js";import"./DTlZofzt.js";const G={key:0,class:"answer"},X=v({__name:"cell",props:{cell:{},answer:{type:Boolean},showAnswer:{type:Boolean}},emits:["click"],setup(t,{emit:e}){const s=t,o=e,c=()=>{o("click")};return(i,r)=>(a(),O(E,{class:V(["cell",{"is-fill":s.cell,"is-answer":s.showAnswer&&s.answer}]),color:i.cell?"primary":"background",onClick:c},{default:m(()=>[s.showAnswer&&s.answer?(a(),f("div",G)):L("",!0)]),_:1},8,["class","color"]))}}),Y=A(X,[["__scopeId","data-v-49d7c78d"]]),I={class:"board"},M=v({__name:"board",props:{field:{},shortestField:{},showAnswer:{type:Boolean}},emits:["onClickCell"],setup(t,{emit:e}){const s=t,o=e,c=(i,r)=>{o("onClickCell",i,r)};return(i,r)=>{const u=Y;return a(),f("div",I,[(a(!0),f(B,null,$(s.field,(_,d)=>(a(),f("div",{key:d,class:"row"},[(a(!0),f(B,null,$(_,(l,w)=>(a(),f("div",{key:w,class:V(["cell",{"cell--on":l}])},[p(u,{cell:l,answer:i.shortestField[d][w],"show-answer":i.showAnswer,onClick:F=>c(d,w)},null,8,["cell","answer","show-answer","onClick"])],2))),128))]))),128))])}}}),D=A(M,[["__scopeId","data-v-4ffa419d"]]),P={answer:[[[],[],[[0,1],[0,2],[1,1],[1,2],[1,3],[2,0],[2,1],[2,4],[3,1],[3,4],[4,2],[4,3]],[[0,0],[0,1],[0,2],[2,0],[2,1],[2,2],[3,1],[3,3],[4,2],[4,3],[4,4]],[[0,0],[0,2],[0,3],[2,0],[2,2],[2,3],[3,0],[3,4],[4,1],[4,2],[4,4]]],[[[0,0]],[[0,2],[1,1],[1,2],[1,3],[2,0],[2,1],[2,4],[3,1],[3,4],[4,2],[4,3]],[[0,0],[0,2],[1,1],[1,2],[1,3],[2,2],[2,4],[3,3],[3,4],[4,4]],[[0,2],[1,1],[1,2],[1,3],[2,0],[2,3],[2,4],[3,0],[3,3],[4,1],[4,2]],[[0,0],[2,0],[2,4],[3,0],[3,1],[3,3],[3,4],[4,0],[4,4]]],[[[0,0],[0,2],[1,0],[1,1],[1,2],[1,3],[2,0],[2,1],[2,4],[3,1],[3,4],[4,2],[4,3]],[[1,1],[2,0],[2,1],[2,2],[3,1],[3,3],[4,2],[4,3],[4,4]],[[0,1],[0,2],[0,4],[1,0],[1,4],[2,0],[2,2],[2,3],[3,2],[4,0],[4,1]],[[0,2],[0,3],[0,4],[1,3]],[[0,3],[1,1],[1,2],[1,3],[1,4],[2,0],[2,2],[3,0],[3,1],[4,0]]],[[[0,2],[1,0],[1,2],[1,3],[2,0],[2,2],[2,4],[3,3],[3,4],[4,4]],[[0,2],[0,3],[1,1],[1,4],[2,0],[2,1],[2,4],[3,1],[3,2],[3,3],[4,2]],[[0,0],[2,0],[3,0],[3,1],[4,0]],[[0,1],[0,2],[1,0],[1,3],[2,0],[2,3],[2,4],[3,1],[3,2],[3,3],[4,2]],[[1,0],[1,1],[2,2],[3,0],[3,2],[3,3],[4,0],[4,2]]],[[[0,0],[0,2],[0,3],[1,4],[2,0],[2,2],[2,4],[3,0],[3,2],[4,3],[4,4]],[[0,2],[0,3],[0,4],[1,3],[3,3],[4,2],[4,3],[4,4]],[[0,0],[0,2],[0,3],[0,4],[1,1],[1,3],[2,1],[2,2],[3,0],[3,1],[4,1]],[[0,0],[0,1],[0,3],[0,4],[1,1],[2,2],[2,3],[2,4],[3,3]],[[0,1],[0,2],[0,3],[1,2],[1,4],[2,3],[2,4],[3,4]]]]},R=N("useLightsOut",{state:()=>({field:[],startField:[],fieldY:5,fieldX:5,clickCount:0,isShowAnswer:!1}),getters:{isGameClear(){return this.field.flat().every(t=>!t)},shortestField(){const t=this.startField.map(s=>s.slice()),e=Array.from({length:this.fieldY},()=>Array.from({length:this.fieldX},()=>!1));return t.forEach((s,o)=>s.forEach((c,i)=>{let r=0;P.answer[o][i].forEach(([u,_])=>{t[u][_]&&r++}),e[o][i]=r%2===1})),e},shortestCount(){return this.shortestField.flat().filter(t=>t).length}},actions:{initialize(){this.field=Array.from({length:this.fieldY},()=>Array.from({length:this.fieldX},()=>!1))},start(){this.field.forEach((t,e)=>t.forEach((s,o)=>{Math.random()<.5&&this.toggle(e,o)})),this.startField=this.field.map(t=>t.slice()),this.clickCount=0,this.isShowAnswer=!1},restart(){this.field=this.startField.map(t=>t.slice()),this.clickCount=0,this.isShowAnswer=!1},toggle(t,e){this.clickCount++,this.field[t][e]=!this.field[t][e],t>0&&(this.field[t-1][e]=!this.field[t-1][e]),t<this.fieldY-1&&(this.field[t+1][e]=!this.field[t+1][e]),e>0&&(this.field[t][e-1]=!this.field[t][e-1]),e<this.fieldX-1&&(this.field[t][e+1]=!this.field[t][e+1])},showAnswer(){this.restart(),this.isShowAnswer=!0}}}),T=v({__name:"lights-out",setup(t){const e=R(),s=h(()=>e.field),o=h(()=>e.isGameClear),c=h(()=>e.shortestCount),i=h(()=>e.clickCount),r=h(()=>e.shortestField),u=h(()=>e.isShowAnswer),_=(d,l)=>{e.toggle(d,l)};return e.initialize(),e.start(),(d,l)=>{const w=D,F=z("v-bnt");return a(),O(F,{class:"lights-out"},{default:m(()=>[p(w,{field:n(s),"shortest-field":n(r),onOnClickCell:_,"show-answer":n(u)},null,8,["field","shortest-field","show-answer"]),p(k,{onClick:l[0]||(l[0]=S=>n(e).start())},{default:m(()=>[C(" new game ")]),_:1}),p(k,{onClick:l[1]||(l[1]=S=>n(e).restart())},{default:m(()=>[C(" restart ")]),_:1}),p(k,{onClick:l[2]||(l[2]=S=>n(e).showAnswer())},{default:m(()=>[C(" answer ")]),_:1}),b("div",null,g(n(o)?"Game Clear!":""),1),b("div",null,g(n(c))+" / "+g(n(i)),1)]),_:1})}}}),y=A(T,[["__scopeId","data-v-df76e83b"]]);export{y as default};
